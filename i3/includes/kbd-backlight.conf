# Keyboard backlight configuration
# Declarative brightness level cycling via standard Fn-keys
# Brightness levels are auto-detected based on hardware capabilities

# Standard XF86 keyboard backlight keys (Fn+Space / Fn+F5 etc. depending on laptop)
# Note: Fn+Space (XF86KbdLightOnOff) toggles backlight at kernel/firmware level;
# i3 binding only shows the OSD notification via dunst after the kernel handles it
bindsym XF86KbdBrightnessUp exec --no-startup-id ~/dotfiles/bin/kbd-backlight.sh up
bindsym XF86KbdBrightnessDown exec --no-startup-id ~/dotfiles/bin/kbd-backlight.sh down
bindsym XF86KbdLightOnOff exec --no-startup-id ~/dotfiles/bin/kbd-backlight.sh notify

# Keyboard backlight watcher: monitors sysfs for brightness changes and shows OSD
# This ensures dunst notification works even when Fn+Space is handled by firmware
# and never reaches X11 (common on many laptops)
exec_always --no-startup-id sh -lc 'pkill -f kbd-backlight-watcher 2>/dev/null; sleep 0.3 && ~/dotfiles/bin/kbd-backlight-watcher.sh start'
